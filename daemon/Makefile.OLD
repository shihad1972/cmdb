#
#
# Makefile for CMDBD c programs
#
#

CC = gcc
RM = rm -f
override CFLAGS := -ansi -std=c99 -pedantic -O0 -W -Wall -Wconversion -Wshadow -Wcast-qual -Wwrite-strings -Wunused -g -D_POSIX_C_SOURCE=200809L `libgcrypt-config --cflags` $(CFLAGS)
override LDFLAGS := $(LDFLAGS) -L../lib/
override CPPFLAGS := $(CPPFLAGS) -I../src/ -I../include/
# Seems I have to use the full path to the "local" library,
# otherwise make thinks it is a target.
LDLIBS := -lgcrypt ../lib/libailsacmdb.a

sbin_PROGRAMS = cmdbd

CDOBJECTS = cmdbd.o
CDHEADERS = cmdbd.h

all:	$(sbin_PROGRAMS)

cmdbd:	$(CDOBJECTS) $(LDLIBS)
$(CDOBJECTS):	$(CDHEADERS)

.PHONY:	clean

clean:
	$(RM) *.o $(sbin_PROGRAMS)

