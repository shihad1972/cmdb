#
#
# Makefile for DNSA c programs
#
#

CC = gcc
RM = rm -f
override CFLAGS := $(CFLAGS) -ansi -std=c99 -pedantic -O0 -W -Wall -Wconversion -Wshadow -Wcast-qual -Wwrite-strings -Wunused -g -D_POSIX_C_SOURCE=200809L
override CPPFLAGS := $(CPPFLAGS) -I/usr/include/mysql -I../include/ -I/usr/include/libxml2
LDFLAGS = -L../lib/ -L/usr/lib/mysql -L/usr/lib/x86_64-linux-gnu
LDLIBS = -lailsasql -lailsacmdb -lmysqlclient -lpcre -lsqlite3 -lyaml -lvirt -lxml2
bin_programs = dnsa cbc cbcdomain cbcos cbcvarient cbcpart cpc cbcsysp cbcscript ckc cbclocale cmdb2 dynamo hellolv mkvm

SOBJECTS = checks.o
COMOBJECTS = cbc_common.o cbccom.o
DNSCOMOBJ = dnsa_net.o zones.o dnsacom.o
COBJECTS = cmdb.o cmdbcom.o $(SOBJECTS) servers.o customers.o
C2OBJECTS = cmdb2.o cmdb2com.o
DYNAOBJS = dynamo.o
MKVMOBJS = mkvm.o virtual.o
DOBJECTS = dnsa.o $(SOBJECTS) $(DNSCOMOBJ)
BOBJECTS = cbc.o $(SOBJECTS) $(COMOBJECTS) $(DNSCOMOBJ) build.o createbuild.o cbc_dnsa.o
CDOBJECTS = cbcdomain.o $(SOBJECTS) $(COMOBJECTS) $(DNSCOMOBJ) cbcnet.o cbc_dnsa.o
COOBJECTS = cbcos.o $(SOBJECTS) $(COMOBJECTS) cbcnet.o
CVOBJECTS = cbcvarient.o $(SOBJECTS) $(COMOBJECTS)
CKOBJECTS = cbcpart.o $(SOBJECTS) $(COMOBJECTS)
CLOBJECTS = cbclocale.o $(SOBJECTS) $(COMOBJECTS)
POBJECTS = cpc.c $(SOBJECTS)
KOBJECTS = ckc.c $(SOBJECTS)
SPOBJECTS = cbcsysp.o $(SOBJECTS) $(COMOBJECTS)
SSOBJECTS = cbcscript.o $(SOBJECTS) $(COMOBJECTS)
TOBJECTS = sql_test.o $(SOBJECTS)

all:	$(bin_programs)

dnsa:	$(DOBJECTS)

cmdb2:	$(C2OBJECTS)

dynamo:	$(DYNAOBJS)

cbc:	$(BOBJECTS)

cbcdomain:	$(CDOBJECTS)

cbcos:	$(COOBJECTS)

cbcvarient:	$(CVOBJECTS)

cbcpart:	$(CKOBJECTS)

cbclocale:	$(CLOBJECTS)

cpc:	$(POBJECTS)

ckc:	$(KOBJECTS)

cbcsysp:	$(SPOBJECTS)

cbcscript:	$(SSOBJECTS)

mkvm:	$(MKVMOBJS)

hellolv:	hellolv.o

.PHONY :	clean
clean :
	$(RM) *.o $(bin_programs)

